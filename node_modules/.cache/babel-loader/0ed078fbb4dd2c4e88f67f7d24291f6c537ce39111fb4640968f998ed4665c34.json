{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.withTimeout = void 0;\nvar tslib_1 = require(\"tslib\");\nvar errors_1 = require(\"./errors\");\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nfunction withTimeout(sync, timeout, timeoutError) {\n  var _this = this;\n  if (timeoutError === void 0) {\n    timeoutError = errors_1.E_TIMEOUT;\n  }\n  return {\n    acquire: function () {\n      return new Promise(function (resolve, reject) {\n        return (0, tslib_1.__awaiter)(_this, void 0, void 0, function () {\n          var isTimeout, handle, ticket, release, e_1;\n          return (0, tslib_1.__generator)(this, function (_a) {\n            switch (_a.label) {\n              case 0:\n                isTimeout = false;\n                handle = setTimeout(function () {\n                  isTimeout = true;\n                  reject(timeoutError);\n                }, timeout);\n                _a.label = 1;\n              case 1:\n                _a.trys.push([1, 3,, 4]);\n                return [4 /*yield*/, sync.acquire()];\n              case 2:\n                ticket = _a.sent();\n                if (isTimeout) {\n                  release = Array.isArray(ticket) ? ticket[1] : ticket;\n                  release();\n                } else {\n                  clearTimeout(handle);\n                  resolve(ticket);\n                }\n                return [3 /*break*/, 4];\n              case 3:\n                e_1 = _a.sent();\n                if (!isTimeout) {\n                  clearTimeout(handle);\n                  reject(e_1);\n                }\n                return [3 /*break*/, 4];\n              case 4:\n                return [2 /*return*/];\n            }\n          });\n        });\n      });\n    },\n\n    runExclusive: function (callback) {\n      return (0, tslib_1.__awaiter)(this, void 0, void 0, function () {\n        var release, ticket;\n        return (0, tslib_1.__generator)(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              release = function () {\n                return undefined;\n              };\n              _a.label = 1;\n            case 1:\n              _a.trys.push([1,, 7, 8]);\n              return [4 /*yield*/, this.acquire()];\n            case 2:\n              ticket = _a.sent();\n              if (!Array.isArray(ticket)) return [3 /*break*/, 4];\n              release = ticket[1];\n              return [4 /*yield*/, callback(ticket[0])];\n            case 3:\n              return [2 /*return*/, _a.sent()];\n            case 4:\n              release = ticket;\n              return [4 /*yield*/, callback()];\n            case 5:\n              return [2 /*return*/, _a.sent()];\n            case 6:\n              return [3 /*break*/, 8];\n            case 7:\n              release();\n              return [7 /*endfinally*/];\n            case 8:\n              return [2 /*return*/];\n          }\n        });\n      });\n    },\n\n    /** @deprecated Deprecated in 0.3.0, will be removed in 0.4.0. Use runExclusive instead. */\n    release: function () {\n      sync.release();\n    },\n    cancel: function () {\n      return sync.cancel();\n    },\n    waitForUnlock: function () {\n      return sync.waitForUnlock();\n    },\n    isLocked: function () {\n      return sync.isLocked();\n    }\n  };\n}\nexports.withTimeout = withTimeout;","map":{"version":3,"names":["Object","defineProperty","exports","value","withTimeout","tslib_1","require","errors_1","sync","timeout","timeoutError","_this","E_TIMEOUT","acquire","Promise","resolve","reject","__awaiter","isTimeout","handle","ticket","release","e_1","__generator","_a","label","setTimeout","trys","push","sent","Array","isArray","clearTimeout","runExclusive","callback","undefined","cancel","waitForUnlock","isLocked"],"sources":["C:/Users/Muhammed/Desktop/REACT_JS/dene-gramjs/node_modules/async-mutex/lib/withTimeout.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.withTimeout = void 0;\nvar tslib_1 = require(\"tslib\");\nvar errors_1 = require(\"./errors\");\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nfunction withTimeout(sync, timeout, timeoutError) {\n    var _this = this;\n    if (timeoutError === void 0) { timeoutError = errors_1.E_TIMEOUT; }\n    return {\n        acquire: function () {\n            return new Promise(function (resolve, reject) { return (0, tslib_1.__awaiter)(_this, void 0, void 0, function () {\n                var isTimeout, handle, ticket, release, e_1;\n                return (0, tslib_1.__generator)(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            isTimeout = false;\n                            handle = setTimeout(function () {\n                                isTimeout = true;\n                                reject(timeoutError);\n                            }, timeout);\n                            _a.label = 1;\n                        case 1:\n                            _a.trys.push([1, 3, , 4]);\n                            return [4 /*yield*/, sync.acquire()];\n                        case 2:\n                            ticket = _a.sent();\n                            if (isTimeout) {\n                                release = Array.isArray(ticket) ? ticket[1] : ticket;\n                                release();\n                            }\n                            else {\n                                clearTimeout(handle);\n                                resolve(ticket);\n                            }\n                            return [3 /*break*/, 4];\n                        case 3:\n                            e_1 = _a.sent();\n                            if (!isTimeout) {\n                                clearTimeout(handle);\n                                reject(e_1);\n                            }\n                            return [3 /*break*/, 4];\n                        case 4: return [2 /*return*/];\n                    }\n                });\n            }); });\n        },\n        runExclusive: function (callback) {\n            return (0, tslib_1.__awaiter)(this, void 0, void 0, function () {\n                var release, ticket;\n                return (0, tslib_1.__generator)(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            release = function () { return undefined; };\n                            _a.label = 1;\n                        case 1:\n                            _a.trys.push([1, , 7, 8]);\n                            return [4 /*yield*/, this.acquire()];\n                        case 2:\n                            ticket = _a.sent();\n                            if (!Array.isArray(ticket)) return [3 /*break*/, 4];\n                            release = ticket[1];\n                            return [4 /*yield*/, callback(ticket[0])];\n                        case 3: return [2 /*return*/, _a.sent()];\n                        case 4:\n                            release = ticket;\n                            return [4 /*yield*/, callback()];\n                        case 5: return [2 /*return*/, _a.sent()];\n                        case 6: return [3 /*break*/, 8];\n                        case 7:\n                            release();\n                            return [7 /*endfinally*/];\n                        case 8: return [2 /*return*/];\n                    }\n                });\n            });\n        },\n        /** @deprecated Deprecated in 0.3.0, will be removed in 0.4.0. Use runExclusive instead. */\n        release: function () {\n            sync.release();\n        },\n        cancel: function () {\n            return sync.cancel();\n        },\n        waitForUnlock: function () { return sync.waitForUnlock(); },\n        isLocked: function () { return sync.isLocked(); },\n    };\n}\nexports.withTimeout = withTimeout;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}