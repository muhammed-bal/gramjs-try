{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar tslib_1 = require(\"tslib\");\nvar errors_1 = require(\"./errors\");\nvar Semaphore = /** @class */function () {\n  function Semaphore(_maxConcurrency, _cancelError) {\n    if (_cancelError === void 0) {\n      _cancelError = errors_1.E_CANCELED;\n    }\n    this._maxConcurrency = _maxConcurrency;\n    this._cancelError = _cancelError;\n    this._queue = [];\n    this._waiters = [];\n    if (_maxConcurrency <= 0) {\n      throw new Error('semaphore must be initialized to a positive value');\n    }\n    this._value = _maxConcurrency;\n  }\n  Semaphore.prototype.acquire = function () {\n    var _this = this;\n    var locked = this.isLocked();\n    var ticketPromise = new Promise(function (resolve, reject) {\n      return _this._queue.push({\n        resolve: resolve,\n        reject: reject\n      });\n    });\n    if (!locked) this._dispatch();\n    return ticketPromise;\n  };\n  Semaphore.prototype.runExclusive = function (callback) {\n    return (0, tslib_1.__awaiter)(this, void 0, void 0, function () {\n      var _a, value, release;\n      return (0, tslib_1.__generator)(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            return [4 /*yield*/, this.acquire()];\n          case 1:\n            _a = _b.sent(), value = _a[0], release = _a[1];\n            _b.label = 2;\n          case 2:\n            _b.trys.push([2,, 4, 5]);\n            return [4 /*yield*/, callback(value)];\n          case 3:\n            return [2 /*return*/, _b.sent()];\n          case 4:\n            release();\n            return [7 /*endfinally*/];\n          case 5:\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n\n  Semaphore.prototype.waitForUnlock = function () {\n    return (0, tslib_1.__awaiter)(this, void 0, void 0, function () {\n      var waitPromise;\n      var _this = this;\n      return (0, tslib_1.__generator)(this, function (_a) {\n        if (!this.isLocked()) {\n          return [2 /*return*/, Promise.resolve()];\n        }\n        waitPromise = new Promise(function (resolve) {\n          return _this._waiters.push({\n            resolve: resolve\n          });\n        });\n        return [2 /*return*/, waitPromise];\n      });\n    });\n  };\n  Semaphore.prototype.isLocked = function () {\n    return this._value <= 0;\n  };\n  /** @deprecated Deprecated in 0.3.0, will be removed in 0.4.0. Use runExclusive instead. */\n  Semaphore.prototype.release = function () {\n    if (this._maxConcurrency > 1) {\n      throw new Error('this method is unavailable on semaphores with concurrency > 1; use the scoped release returned by acquire instead');\n    }\n    if (this._currentReleaser) {\n      var releaser = this._currentReleaser;\n      this._currentReleaser = undefined;\n      releaser();\n    }\n  };\n  Semaphore.prototype.cancel = function () {\n    var _this = this;\n    this._queue.forEach(function (ticket) {\n      return ticket.reject(_this._cancelError);\n    });\n    this._queue = [];\n  };\n  Semaphore.prototype._dispatch = function () {\n    var _this = this;\n    var nextTicket = this._queue.shift();\n    if (!nextTicket) return;\n    var released = false;\n    this._currentReleaser = function () {\n      if (released) return;\n      released = true;\n      _this._value++;\n      _this._resolveWaiters();\n      _this._dispatch();\n    };\n    nextTicket.resolve([this._value--, this._currentReleaser]);\n  };\n  Semaphore.prototype._resolveWaiters = function () {\n    this._waiters.forEach(function (waiter) {\n      return waiter.resolve();\n    });\n    this._waiters = [];\n  };\n  return Semaphore;\n}();\nexports.default = Semaphore;","map":{"version":3,"names":["Object","defineProperty","exports","value","tslib_1","require","errors_1","Semaphore","_maxConcurrency","_cancelError","E_CANCELED","_queue","_waiters","Error","_value","prototype","acquire","_this","locked","isLocked","ticketPromise","Promise","resolve","reject","push","_dispatch","runExclusive","callback","__awaiter","_a","release","__generator","_b","label","sent","trys","waitForUnlock","waitPromise","_currentReleaser","releaser","undefined","cancel","forEach","ticket","nextTicket","shift","released","_resolveWaiters","waiter","default"],"sources":["C:/Users/Muhammed/Desktop/REACT_JS/dene-gramjs/node_modules/async-mutex/lib/Semaphore.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar errors_1 = require(\"./errors\");\nvar Semaphore = /** @class */ (function () {\n    function Semaphore(_maxConcurrency, _cancelError) {\n        if (_cancelError === void 0) { _cancelError = errors_1.E_CANCELED; }\n        this._maxConcurrency = _maxConcurrency;\n        this._cancelError = _cancelError;\n        this._queue = [];\n        this._waiters = [];\n        if (_maxConcurrency <= 0) {\n            throw new Error('semaphore must be initialized to a positive value');\n        }\n        this._value = _maxConcurrency;\n    }\n    Semaphore.prototype.acquire = function () {\n        var _this = this;\n        var locked = this.isLocked();\n        var ticketPromise = new Promise(function (resolve, reject) {\n            return _this._queue.push({ resolve: resolve, reject: reject });\n        });\n        if (!locked)\n            this._dispatch();\n        return ticketPromise;\n    };\n    Semaphore.prototype.runExclusive = function (callback) {\n        return (0, tslib_1.__awaiter)(this, void 0, void 0, function () {\n            var _a, value, release;\n            return (0, tslib_1.__generator)(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this.acquire()];\n                    case 1:\n                        _a = _b.sent(), value = _a[0], release = _a[1];\n                        _b.label = 2;\n                    case 2:\n                        _b.trys.push([2, , 4, 5]);\n                        return [4 /*yield*/, callback(value)];\n                    case 3: return [2 /*return*/, _b.sent()];\n                    case 4:\n                        release();\n                        return [7 /*endfinally*/];\n                    case 5: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Semaphore.prototype.waitForUnlock = function () {\n        return (0, tslib_1.__awaiter)(this, void 0, void 0, function () {\n            var waitPromise;\n            var _this = this;\n            return (0, tslib_1.__generator)(this, function (_a) {\n                if (!this.isLocked()) {\n                    return [2 /*return*/, Promise.resolve()];\n                }\n                waitPromise = new Promise(function (resolve) { return _this._waiters.push({ resolve: resolve }); });\n                return [2 /*return*/, waitPromise];\n            });\n        });\n    };\n    Semaphore.prototype.isLocked = function () {\n        return this._value <= 0;\n    };\n    /** @deprecated Deprecated in 0.3.0, will be removed in 0.4.0. Use runExclusive instead. */\n    Semaphore.prototype.release = function () {\n        if (this._maxConcurrency > 1) {\n            throw new Error('this method is unavailable on semaphores with concurrency > 1; use the scoped release returned by acquire instead');\n        }\n        if (this._currentReleaser) {\n            var releaser = this._currentReleaser;\n            this._currentReleaser = undefined;\n            releaser();\n        }\n    };\n    Semaphore.prototype.cancel = function () {\n        var _this = this;\n        this._queue.forEach(function (ticket) { return ticket.reject(_this._cancelError); });\n        this._queue = [];\n    };\n    Semaphore.prototype._dispatch = function () {\n        var _this = this;\n        var nextTicket = this._queue.shift();\n        if (!nextTicket)\n            return;\n        var released = false;\n        this._currentReleaser = function () {\n            if (released)\n                return;\n            released = true;\n            _this._value++;\n            _this._resolveWaiters();\n            _this._dispatch();\n        };\n        nextTicket.resolve([this._value--, this._currentReleaser]);\n    };\n    Semaphore.prototype._resolveWaiters = function () {\n        this._waiters.forEach(function (waiter) { return waiter.resolve(); });\n        this._waiters = [];\n    };\n    return Semaphore;\n}());\nexports.default = Semaphore;\n"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7D,IAAIC,OAAO,GAAGC,OAAO,CAAC,OAAO,CAAC;AAC9B,IAAIC,QAAQ,GAAGD,OAAO,CAAC,UAAU,CAAC;AAClC,IAAIE,SAAS,GAAG,aAAe,YAAY;EACvC,SAASA,SAASA,CAACC,eAAe,EAAEC,YAAY,EAAE;IAC9C,IAAIA,YAAY,KAAK,KAAK,CAAC,EAAE;MAAEA,YAAY,GAAGH,QAAQ,CAACI,UAAU;IAAE;IACnE,IAAI,CAACF,eAAe,GAAGA,eAAe;IACtC,IAAI,CAACC,YAAY,GAAGA,YAAY;IAChC,IAAI,CAACE,MAAM,GAAG,EAAE;IAChB,IAAI,CAACC,QAAQ,GAAG,EAAE;IAClB,IAAIJ,eAAe,IAAI,CAAC,EAAE;MACtB,MAAM,IAAIK,KAAK,CAAC,mDAAmD,CAAC;IACxE;IACA,IAAI,CAACC,MAAM,GAAGN,eAAe;EACjC;EACAD,SAAS,CAACQ,SAAS,CAACC,OAAO,GAAG,YAAY;IACtC,IAAIC,KAAK,GAAG,IAAI;IAChB,IAAIC,MAAM,GAAG,IAAI,CAACC,QAAQ,CAAC,CAAC;IAC5B,IAAIC,aAAa,GAAG,IAAIC,OAAO,CAAC,UAAUC,OAAO,EAAEC,MAAM,EAAE;MACvD,OAAON,KAAK,CAACN,MAAM,CAACa,IAAI,CAAC;QAAEF,OAAO,EAAEA,OAAO;QAAEC,MAAM,EAAEA;MAAO,CAAC,CAAC;IAClE,CAAC,CAAC;IACF,IAAI,CAACL,MAAM,EACP,IAAI,CAACO,SAAS,CAAC,CAAC;IACpB,OAAOL,aAAa;EACxB,CAAC;EACDb,SAAS,CAACQ,SAAS,CAACW,YAAY,GAAG,UAAUC,QAAQ,EAAE;IACnD,OAAO,CAAC,CAAC,EAAEvB,OAAO,CAACwB,SAAS,EAAE,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,YAAY;MAC5D,IAAIC,EAAE,EAAE1B,KAAK,EAAE2B,OAAO;MACtB,OAAO,CAAC,CAAC,EAAE1B,OAAO,CAAC2B,WAAW,EAAE,IAAI,EAAE,UAAUC,EAAE,EAAE;QAChD,QAAQA,EAAE,CAACC,KAAK;UACZ,KAAK,CAAC;YAAE,OAAO,CAAC,CAAC,CAAC,WAAW,IAAI,CAACjB,OAAO,CAAC,CAAC,CAAC;UAC5C,KAAK,CAAC;YACFa,EAAE,GAAGG,EAAE,CAACE,IAAI,CAAC,CAAC,EAAE/B,KAAK,GAAG0B,EAAE,CAAC,CAAC,CAAC,EAAEC,OAAO,GAAGD,EAAE,CAAC,CAAC,CAAC;YAC9CG,EAAE,CAACC,KAAK,GAAG,CAAC;UAChB,KAAK,CAAC;YACFD,EAAE,CAACG,IAAI,CAACX,IAAI,CAAC,CAAC,CAAC,GAAI,CAAC,EAAE,CAAC,CAAC,CAAC;YACzB,OAAO,CAAC,CAAC,CAAC,WAAWG,QAAQ,CAACxB,KAAK,CAAC,CAAC;UACzC,KAAK,CAAC;YAAE,OAAO,CAAC,CAAC,CAAC,YAAY6B,EAAE,CAACE,IAAI,CAAC,CAAC,CAAC;UACxC,KAAK,CAAC;YACFJ,OAAO,CAAC,CAAC;YACT,OAAO,CAAC,CAAC,CAAC,eAAe;UAC7B,KAAK,CAAC;YAAE,OAAO,CAAC,CAAC,CAAC,WAAW;QACjC;MACJ,CAAC,CAAC;IACN,CAAC,CAAC;EACN,CAAC;;EACDvB,SAAS,CAACQ,SAAS,CAACqB,aAAa,GAAG,YAAY;IAC5C,OAAO,CAAC,CAAC,EAAEhC,OAAO,CAACwB,SAAS,EAAE,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,YAAY;MAC5D,IAAIS,WAAW;MACf,IAAIpB,KAAK,GAAG,IAAI;MAChB,OAAO,CAAC,CAAC,EAAEb,OAAO,CAAC2B,WAAW,EAAE,IAAI,EAAE,UAAUF,EAAE,EAAE;QAChD,IAAI,CAAC,IAAI,CAACV,QAAQ,CAAC,CAAC,EAAE;UAClB,OAAO,CAAC,CAAC,CAAC,YAAYE,OAAO,CAACC,OAAO,CAAC,CAAC,CAAC;QAC5C;QACAe,WAAW,GAAG,IAAIhB,OAAO,CAAC,UAAUC,OAAO,EAAE;UAAE,OAAOL,KAAK,CAACL,QAAQ,CAACY,IAAI,CAAC;YAAEF,OAAO,EAAEA;UAAQ,CAAC,CAAC;QAAE,CAAC,CAAC;QACnG,OAAO,CAAC,CAAC,CAAC,YAAYe,WAAW,CAAC;MACtC,CAAC,CAAC;IACN,CAAC,CAAC;EACN,CAAC;EACD9B,SAAS,CAACQ,SAAS,CAACI,QAAQ,GAAG,YAAY;IACvC,OAAO,IAAI,CAACL,MAAM,IAAI,CAAC;EAC3B,CAAC;EACD;EACAP,SAAS,CAACQ,SAAS,CAACe,OAAO,GAAG,YAAY;IACtC,IAAI,IAAI,CAACtB,eAAe,GAAG,CAAC,EAAE;MAC1B,MAAM,IAAIK,KAAK,CAAC,mHAAmH,CAAC;IACxI;IACA,IAAI,IAAI,CAACyB,gBAAgB,EAAE;MACvB,IAAIC,QAAQ,GAAG,IAAI,CAACD,gBAAgB;MACpC,IAAI,CAACA,gBAAgB,GAAGE,SAAS;MACjCD,QAAQ,CAAC,CAAC;IACd;EACJ,CAAC;EACDhC,SAAS,CAACQ,SAAS,CAAC0B,MAAM,GAAG,YAAY;IACrC,IAAIxB,KAAK,GAAG,IAAI;IAChB,IAAI,CAACN,MAAM,CAAC+B,OAAO,CAAC,UAAUC,MAAM,EAAE;MAAE,OAAOA,MAAM,CAACpB,MAAM,CAACN,KAAK,CAACR,YAAY,CAAC;IAAE,CAAC,CAAC;IACpF,IAAI,CAACE,MAAM,GAAG,EAAE;EACpB,CAAC;EACDJ,SAAS,CAACQ,SAAS,CAACU,SAAS,GAAG,YAAY;IACxC,IAAIR,KAAK,GAAG,IAAI;IAChB,IAAI2B,UAAU,GAAG,IAAI,CAACjC,MAAM,CAACkC,KAAK,CAAC,CAAC;IACpC,IAAI,CAACD,UAAU,EACX;IACJ,IAAIE,QAAQ,GAAG,KAAK;IACpB,IAAI,CAACR,gBAAgB,GAAG,YAAY;MAChC,IAAIQ,QAAQ,EACR;MACJA,QAAQ,GAAG,IAAI;MACf7B,KAAK,CAACH,MAAM,EAAE;MACdG,KAAK,CAAC8B,eAAe,CAAC,CAAC;MACvB9B,KAAK,CAACQ,SAAS,CAAC,CAAC;IACrB,CAAC;IACDmB,UAAU,CAACtB,OAAO,CAAC,CAAC,IAAI,CAACR,MAAM,EAAE,EAAE,IAAI,CAACwB,gBAAgB,CAAC,CAAC;EAC9D,CAAC;EACD/B,SAAS,CAACQ,SAAS,CAACgC,eAAe,GAAG,YAAY;IAC9C,IAAI,CAACnC,QAAQ,CAAC8B,OAAO,CAAC,UAAUM,MAAM,EAAE;MAAE,OAAOA,MAAM,CAAC1B,OAAO,CAAC,CAAC;IAAE,CAAC,CAAC;IACrE,IAAI,CAACV,QAAQ,GAAG,EAAE;EACtB,CAAC;EACD,OAAOL,SAAS;AACpB,CAAC,CAAC,CAAE;AACJL,OAAO,CAAC+C,OAAO,GAAG1C,SAAS"},"metadata":{},"sourceType":"script","externalDependencies":[]}